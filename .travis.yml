# Travis example for Modern C++ by Rafa≈Ç Pocztarski
# For more languages and info see:
# https://github.com/rsp/travis-hello#readme

sudo: false
language: minimal
dist: bionic
compiler:
  - gcc
addons:
  apt:
    packages:
    - g++-8
git:
    depth: 2
    submodules: false
jobs:
  include:
    - stage: "compile"
      script:
        - make check_buildsys
        - make kfc_blue
        - make tests
      env: DEBUG=1
    - script:
        - make check_buildsys
        - make kfc_red
      env: DEBUG=1
    - script:
        - make check_buildsys
        - make kfc_blue
        - make tests
      env: DEBUG=0 ASSERTS=1
    - script:
        - make check_buildsys
        - make kfc_red
      env: DEBUG=0 ASSERTS=1
env:
  - MATRIX_EVAL="CC=g++-8"
before_install:
  - eval "${MATRIX_EVAL}"
