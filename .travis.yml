# Travis example for Modern C++ by RafaÅ‚ Pocztarski
# For more languages and info see:
# https://github.com/rsp/travis-hello#readme

sudo: false
language: minimal
dist: bionic
compiler:
  - gcc
addons:
  apt:
    packages:
    - g++-8
git:
    depth: 2
    submodules: false
    lfs_skip_smudge: true
env:
  - DEBUG=1
  - DEBUG=0 ASSERTS=1
jobs:
  include:
    - stage: "compile"
      script:
        - make check_buildsys
        - make kfc_blue
        - make tests
    - script:
        - make check_buildsys
        - make kfc_red
env:
  - MATRIX_EVAL="CC=g++-8"
before_install:
  - eval "${MATRIX_EVAL}"
  - echo -e "machine github.com\n  login $GITHUB_TOKEN" > ~/.netrc
  - git lfs pull
